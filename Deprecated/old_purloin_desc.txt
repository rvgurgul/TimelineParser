
def drink_behavior(jason):
    enabled = "Purloin" in jason["picked_missions"]
    purloined = "Purloin" in jason["completed_missions"]
    taken, rejected, sipped, gulped = 0, 0, 0, 0
    if jason["venue"] in const.bar_venues:
        purloin = "No Delegate"
        if not enabled:
            purloin += " (Disabled)"
        for event in jason["timeline"]:
            if event["event"] == "got drink from bartender." or event["event"] == "got cupcake from bartender.":
                taken += 1
                if purloin == "Delegate Cheese":
                    purloin = "Delegate"
            elif event["event"] == "rejected drink from bartender." or event["event"] == "rejected cupcake from bartender.":
                rejected += 1
            elif taken > 0 and event["event"] in const.sipEvents:
                sipped += 1
            elif taken > 0 and event["event"] in const.gulpEvents:
                gulped += 1
            elif enabled and event["event"] == "delegating purloin guest list.":
                purloin = "Delegate Cheese"
            elif enabled and event["event"] == "delegated purloin timer expired.":
                purloin += " (Expired)"
    else:
        purloin = "No Purloin"
        if not enabled:
            purloin += " (Disabled)"
        for event in jason["timeline"]:
            if event["event"] == "got drink from waiter." or event["event"] == "got cupcake from waiter.":
                taken += 1
            elif event["event"] == "rejected drink from waiter." or event["event"] == "rejected cupcake from waiter.":
                rejected += 1
            elif taken > 0 and event["event"] in const.sipEvents:
                sipped += 1
            elif taken > 0 and event["event"] in const.gulpEvents:
                gulped += 1
            elif enabled and event["category"] == ["ActionTest"] and event["mission"] == "Purloin":
                purloin = event["action_test"]
            elif enabled and event["event"] == "purloin guest list aborted.":
                purloin += " (Crash)"
        if purloin == "Green" and not purloined:
            purloin += " (Pending)"
    return taken, rejected, sipped, gulped, purloin

